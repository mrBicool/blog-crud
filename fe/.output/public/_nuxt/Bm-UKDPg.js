import{_ as x,a as E}from"./BrTQF-hm.js";import{_ as N}from"./Bqiq-aj6.js";import{_ as T}from"./VTDPEPOY.js";import{f as U,r as m,g as V,c as S,a as d,b as a,w as i,n as p,o as w,h as r,d as O}from"./maLFL5Tx.js";import{u as R}from"./BnNJGN2H.js";import{u as _}from"./Qnor7pCr.js";import{u as b}from"./p5OpvR-P.js";import"./Bh748a4e.js";import"./D_bbQEEy.js";import"./CvPl5tTm.js";import"./CeLqHVAG.js";const B={class:""},C={class:"mt-4"},I={__name:"edit",setup(M){const n=U(),c=R();console.log("ROUTE",n.params.id);const l=m(null),o=m({title:"",content:""});async function f(){try{const{data:t,error:e}=await _(`/articles/${n.params.id}`,{method:"GET"});if(e.value){console.log("ERROR",e.value),c.add({title:"Not found",color:"red"}),p("/");return}console.log("RESPONSE",t.value),l.value=JSON.parse(JSON.stringify(t.value.data)),o.value.title=l.value.title,o.value.content=l.value.content}catch(t){console.error(t)}}V(async()=>{await b(1),console.log("MOUNTED"),await f()});async function v(){try{if(!confirm("Are you sure you want to update this article?"))return;const{data:t,error:e}=await _(`/articles/${n.params.id}`,{method:"PATCH",body:o.value});if(e.value){c.add({title:e.value.data.message,color:"red"});return}console.log("RESPONSE",t.value),p("/articles")}catch(t){console.error(t)}}return(t,e)=>{const y=E,u=x,g=N,h=T;return w(),S("div",B,[d("div",C,[a(u,{label:"Title",required:""},{default:i(()=>[a(y,{modelValue:r(o).title,"onUpdate:modelValue":e[0]||(e[0]=s=>r(o).title=s),modelModifiers:{trim:!0},color:"primary",variant:"outline",placeholder:"Search..."},null,8,["modelValue"])]),_:1}),a(u,{label:"Content",class:"mt-2",required:""},{default:i(()=>[a(g,{modelValue:r(o).content,"onUpdate:modelValue":e[1]||(e[1]=s=>r(o).content=s),modelModifiers:{trim:!0},color:"primary",variant:"outline",placeholder:"content..."},null,8,["modelValue"])]),_:1}),d("div",null,[a(h,{onClick:v,color:"primary",class:"mt-4",size:"xs",variant:"solid"},{default:i(()=>[O(" Update ")]),_:1})])])])}}};export{I as default};
