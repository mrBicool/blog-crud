import{_ as x,a as N}from"./DZP69egf.js";import{_ as T}from"./DcezJKvC.js";import{_ as V}from"./DYokn59J.js";import{f as U,r as m,g as h,c as w,a as d,b as a,w as i,n as p,o as O,h as r,d as R}from"./Bhnlaw80.js";import{u as S}from"./B3Z1-oLn.js";import{u as _}from"./DgbBGBFi.js";import{u as b}from"./p5OpvR-P.js";import"./DIc9Ghxr.js";import"./DngBRjp4.js";import"./-SOK-yDa.js";import"./DllDu123.js";import"./CvPl5tTm.js";import"./D8ue20Bc.js";const B={class:""},C={class:"mt-4"},K={__name:"edit",setup(M){const n=U(),u=S();console.log("ROUTE",n.params.id);const s=m(null),e=m({title:"",content:""});async function f(){try{const{data:o,error:t}=await _(`/articles/${n.params.id}`,{method:"GET"});if(t.value){console.log("ERROR",t.value),u.add({title:"Not found",color:"red"}),p("/");return}console.log("RESPONSE",o.value),s.value=JSON.parse(JSON.stringify(o.value.data)),e.value.title=s.value.title,e.value.content=s.value.content}catch(o){console.error(o)}}h(async()=>{await b(1),console.log("MOUNTED"),await f()});async function v(){try{if(!confirm("Are you sure you want to update this article?"))return;const{data:o,error:t}=await _(`/articles/${n.params.id}`,{method:"PATCH",body:e.value});if(t.value){u.add({title:t.value.data.message,color:"red"});return}console.log("RESPONSE",o.value),p("/articles")}catch(o){console.error(o)}}return(o,t)=>{const y=N,c=x,g=T,E=V;return O(),w("div",B,[d("div",C,[a(c,{label:"Title",required:""},{default:i(()=>[a(y,{modelValue:r(e).title,"onUpdate:modelValue":t[0]||(t[0]=l=>r(e).title=l),modelModifiers:{trim:!0},color:"primary",variant:"outline"},null,8,["modelValue"])]),_:1}),a(c,{label:"Content",class:"mt-2",required:""},{default:i(()=>[a(g,{modelValue:r(e).content,"onUpdate:modelValue":t[1]||(t[1]=l=>r(e).content=l),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1}),d("div",null,[a(E,{onClick:v,color:"primary",class:"mt-4",size:"xs",variant:"solid"},{default:i(()=>[R(" Update ")]),_:1})])])])}}};export{K as default};
