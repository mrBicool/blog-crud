import{_ as g}from"./CoVWwoff.js";import{_ as v}from"./DuKkvKTj.js";import{r as E,g as w,o as a,c as r,a as e,b as u,w as p,d as i,h as l,F as N,K as k,t as d,v as m}from"./CPIBycqX.js";import{a as S,u as x}from"./CdeO_Sux.js";import{u as A}from"./p5OpvR-P.js";const T={class:"container mx-auto py-4"},b={class:"flex justify-end"},C={class:"mt-4"},D={key:0,role:"list",class:"divide-y divide-gray-100"},B={class:"flex-auto"},L={class:"flex items-baseline justify-between gap-x-4"},O={class:"text-sm font-semibold leading-6 text-gray-900"},V={key:0,class:"font-normal text-gray-500 text-xs"},F=e("span",{class:"hover:text-blue-600 cursor-pointer"},"Edit",-1),$=["onClick"],j={class:"flex-none text-xs text-gray-600"},J={datetime:"2023-03-04T15:54Z"},M={class:"mt-1 line-clamp-2 text-sm leading-6 text-gray-600"},q={__name:"Articles",setup(P){const f=S(),n=E(null);async function _(){try{const{data:t,error:s}=await x("/articles",{method:"GET",params:{page:1}});if(s.value)return;n.value=JSON.parse(JSON.stringify(t.value))}catch(t){console.error(t)}}async function h(t){try{if(confirm("Are you sure you want to delete this item?")){console.log("DELETE",t);const{data:s,error:c}=await x(`/articles/${t.id}`,{method:"DELETE"});if(c.value)return;console.log("RESPONSE",s.value),await _()}}catch(s){console.error(s)}}return w(async()=>{await A(1),console.log("MOUNTED"),await _()}),(t,s)=>{const c=g,y=v;return a(),r("div",null,[e("div",T,[e("div",b,[u(c,{to:"/articles/create",size:"xs"},{default:p(()=>[i("Create Post")]),_:1})]),e("div",C,[l(n)?(a(),r("ul",D,[(a(!0),r(N,null,k(l(n).data,o=>(a(),r("li",{key:o.id,class:"flex gap-x-4 py-5"},[e("div",B,[e("div",L,[e("p",O,[i(d(o.title)+" ",1),["admin","editor"].includes(l(f).user_role)?(a(),r("span",V,[i("| "),u(y,{to:`/articles/${o.id}/edit`},{default:p(()=>[F]),_:2},1032,["to"]),e("span",{onClick:U=>h(o),class:"hover:text-red-600 cursor-pointer"}," Delete",8,$)])):m("",!0)]),e("p",j,[e("time",J,d(o.formatted_created_at),1)])]),e("p",M,d(o.content),1)])]))),128))])):m("",!0)])])])}}};export{q as _};
