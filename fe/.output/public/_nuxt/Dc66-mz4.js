import{_ as g}from"./VTDPEPOY.js";import{_ as v}from"./CeLqHVAG.js";import{r as E,g as k,o as a,c as r,a as t,b as u,w as m,d as i,h as l,F as w,E as N,t as d,G as p}from"./maLFL5Tx.js";import{a as S,u as x}from"./Qnor7pCr.js";import{u as A}from"./p5OpvR-P.js";const T={class:""},b={class:""},C={class:"flex justify-end"},D={class:""},B={key:0,role:"list",class:"divide-y divide-gray-100"},L={class:"flex-auto"},O={class:"flex items-baseline justify-between gap-x-4"},V={class:"text-sm font-semibold leading-6 text-gray-900 dark:text-gray-50 tracking-wider"},F={key:0,class:"font-normal text-gray-500 text-xs ml-2"},$=t("span",{class:"hover:text-blue-600 cursor-pointer ml-1"},"Edit",-1),j=["onClick"],G={class:"flex-none text-xs text-gray-600 dark:text-gray-400"},J={datetime:"2023-03-04T15:54Z"},M={class:"mt-1 line-clamp-2 text-sm leading-6 text-gray-600 dark:text-gray-400 font-light"},I={__name:"Articles",setup(P){const f=S(),n=E(null);async function _(){try{const{data:e,error:s}=await x("/articles",{method:"GET",params:{page:1}});if(s.value)return;n.value=JSON.parse(JSON.stringify(e.value))}catch(e){console.error(e)}}async function h(e){try{if(confirm("Are you sure you want to delete this item?")){console.log("DELETE",e);const{data:s,error:c}=await x(`/articles/${e.id}`,{method:"DELETE"});if(c.value)return;console.log("RESPONSE",s.value),await _()}}catch(s){console.error(s)}}return k(async()=>{await A(1),console.log("MOUNTED"),await _()}),(e,s)=>{const c=g,y=v;return a(),r("div",T,[t("div",b,[t("div",C,[u(c,{to:"/articles/create",size:"xs"},{default:m(()=>[i("Create Post")]),_:1})]),t("div",D,[l(n)?(a(),r("ul",B,[(a(!0),r(w,null,N(l(n).data,o=>(a(),r("li",{key:o.id,class:"flex gap-x-4 py-5"},[t("div",L,[t("div",O,[t("p",V,[i(d(o.title)+" ",1),["admin","editor"].includes(l(f).user_role)?(a(),r("span",F,[i("| "),u(y,{to:`/articles/${o.id}/edit`},{default:m(()=>[$]),_:2},1032,["to"]),t("span",{onClick:U=>h(o),class:"hover:text-red-600 cursor-pointer ml-1"}," Delete",8,j)])):p("",!0)]),t("p",G,[t("time",J,d(o.formatted_created_at),1)])]),t("p",M,d(o.content),1)])]))),128))])):p("",!0)])])])}}};export{I as _};
